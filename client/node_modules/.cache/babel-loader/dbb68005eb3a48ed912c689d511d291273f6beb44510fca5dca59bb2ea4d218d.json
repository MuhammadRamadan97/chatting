{"ast":null,"code":"var _jsxFileName = \"F:\\\\Web-Development\\\\chat-app\\\\client\\\\src\\\\pages\\\\Chat.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { io } from 'socket.io-client';\nimport { AuthContext } from '../context/AuthContext';\nimport { authAPI, messageAPI } from '../services/api';\nimport ChatBox from '../components/ChatBox';\nimport UserList from '../components/UserList';\nimport './Chat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chat = () => {\n  _s();\n  const {\n    user,\n    logout\n  } = useContext(AuthContext);\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [socket, setSocket] = useState(null);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [isTyping, setIsTyping] = useState(false);\n  const navigate = useNavigate();\n  console.log('Chat Component - user:', user);\n  console.log('Chat Component - onlineUsers:', onlineUsers);\n  console.log('Chat Component - messages:', messages);\n\n  // Initialize Socket\n  useEffect(() => {\n    if (!user) {\n      console.log('No user, skipping socket connection');\n      return;\n    }\n    console.log('Setting up socket connection...');\n    try {\n      const newSocket = io(process.env.REACT_APP_API_URL, {\n        reconnection: true,\n        reconnectionDelay: 1000,\n        reconnectionDelayMax: 5000,\n        reconnectionAttempts: 5,\n        transports: ['websocket', 'polling']\n      });\n      newSocket.on('connect', () => {\n        console.log('âœ… Socket connected:', newSocket.id);\n        newSocket.emit('user_online', user.id);\n      });\n      newSocket.on('users_online', userIds => {\n        console.log('ðŸ“¡ Received users_online:', userIds);\n        if (Array.isArray(userIds)) {\n          setOnlineUsers(userIds);\n        } else {\n          setOnlineUsers([]);\n        }\n      });\n      newSocket.on('receive_message', data => {\n        console.log('ðŸ’¬ Message received:', data);\n        setMessages(prev => [...prev, {\n          _id: data._id,\n          sender: data.sender,\n          text: data.text,\n          timestamp: data.timestamp,\n          seen: false\n        }]);\n      });\n      newSocket.on('user_typing', data => {\n        console.log('âœï¸ User typing');\n        setIsTyping(true);\n      });\n      newSocket.on('user_stopped_typing', () => {\n        console.log('âœï¸ User stopped typing');\n        setIsTyping(false);\n      });\n\n      // âœ… NEW: Listen for messages_seen in real-time\n      newSocket.on('messages_seen', data => {\n        console.log('âœ… Messages marked as seen by:', data.by);\n        setMessages(prev => prev.map(msg => msg.sender === user.id ? {\n          ...msg,\n          seen: true\n        } : msg));\n      });\n      newSocket.on('disconnect', () => {\n        console.log('âŒ Socket disconnected');\n        setOnlineUsers([]);\n      });\n      newSocket.on('error', error => {\n        console.error('Socket error:', error);\n      });\n      setSocket(newSocket);\n      return () => {\n        console.log('Cleaning up socket...');\n        newSocket.disconnect();\n      };\n    } catch (error) {\n      console.error('Failed to setup socket:', error);\n    }\n  }, [user]);\n\n  // Fetch users\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        console.log('Fetching users...');\n        const {\n          data\n        } = await authAPI.getUsers();\n        console.log('Users fetched:', data);\n        setUsers(data || []);\n      } catch (error) {\n        console.error('Failed to fetch users:', error);\n        setUsers([]);\n      }\n    };\n    fetchUsers();\n  }, []);\n\n  // Fetch messages when user selected\n  useEffect(() => {\n    if (selectedUser) {\n      const fetchMessages = async () => {\n        try {\n          console.log('Fetching messages for:', selectedUser._id);\n          const {\n            data\n          } = await messageAPI.getMessages(selectedUser._id);\n          console.log('Messages fetched:', data);\n          setMessages(data || []);\n\n          // âœ… NEW: Mark messages as seen when opening chat\n          if (socket && user) {\n            socket.emit('mark_seen', {\n              senderId: selectedUser._id,\n              receiverId: user.id\n            });\n          }\n        } catch (error) {\n          console.error('Failed to fetch messages:', error);\n          setMessages([]);\n        }\n      };\n      fetchMessages();\n    }\n  }, [selectedUser, socket, user]);\n\n  // Send message\n  const handleSendMessage = text => {\n    if (!socket || !selectedUser || !user) {\n      console.error('Cannot send message - missing socket, selectedUser, or user');\n      return;\n    }\n    const messageData = {\n      sender: user.id,\n      receiver: selectedUser._id,\n      text\n    };\n    console.log('ðŸ“¤ Sending message:', messageData);\n    socket.emit('send_message', messageData);\n\n    // Add to local messages\n    setMessages(prev => [...prev, {\n      _id: new Date().getTime(),\n      // Temporary ID\n      sender: user.id,\n      text,\n      timestamp: new Date(),\n      seen: false\n    }]);\n  };\n  const handleTyping = () => {\n    if (socket && selectedUser) {\n      socket.emit('typing', {\n        receiver: selectedUser._id,\n        senderName: user.username\n      });\n    }\n  };\n  const handleStopTyping = () => {\n    if (socket && selectedUser) {\n      socket.emit('stop_typing', {\n        receiver: selectedUser._id\n      });\n    }\n  };\n  const handleLogout = () => {\n    if (socket) {\n      socket.disconnect();\n    }\n    logout();\n    navigate('/login');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDCAC Chat App\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: (user === null || user === void 0 ? void 0 : user.username) || 'User'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(UserList, {\n        users: users,\n        selectedUser: selectedUser,\n        onlineUsers: onlineUsers,\n        onSelectUser: setSelectedUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ChatBox, {\n        selectedUser: selectedUser,\n        messages: messages,\n        currentUser: user,\n        onSendMessage: handleSendMessage,\n        onTyping: handleTyping,\n        onStopTyping: handleStopTyping,\n        isTyping: isTyping\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 9\n  }, this);\n};\n_s(Chat, \"M2YVEJRt4Csw3bPNM4mZR3BY/PU=\", false, function () {\n  return [useNavigate];\n});\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigate","io","AuthContext","authAPI","messageAPI","ChatBox","UserList","jsxDEV","_jsxDEV","Chat","_s","user","logout","users","setUsers","selectedUser","setSelectedUser","messages","setMessages","socket","setSocket","onlineUsers","setOnlineUsers","isTyping","setIsTyping","navigate","console","log","newSocket","process","env","REACT_APP_API_URL","reconnection","reconnectionDelay","reconnectionDelayMax","reconnectionAttempts","transports","on","id","emit","userIds","Array","isArray","data","prev","_id","sender","text","timestamp","seen","by","map","msg","error","disconnect","fetchUsers","getUsers","fetchMessages","getMessages","senderId","receiverId","handleSendMessage","messageData","receiver","Date","getTime","handleTyping","senderName","username","handleStopTyping","handleLogout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSelectUser","currentUser","onSendMessage","onTyping","onStopTyping","_c","$RefreshReg$"],"sources":["F:/Web-Development/chat-app/client/src/pages/Chat.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { io } from 'socket.io-client';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { authAPI, messageAPI } from '../services/api';\r\nimport ChatBox from '../components/ChatBox';\r\nimport UserList from '../components/UserList';\r\nimport './Chat.css';\r\n\r\nconst Chat = () => {\r\n    const { user, logout } = useContext(AuthContext);\r\n    const [users, setUsers] = useState([]);\r\n    const [selectedUser, setSelectedUser] = useState(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [socket, setSocket] = useState(null);\r\n    const [onlineUsers, setOnlineUsers] = useState([]);\r\n    const [isTyping, setIsTyping] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    console.log('Chat Component - user:', user);\r\n    console.log('Chat Component - onlineUsers:', onlineUsers);\r\n    console.log('Chat Component - messages:', messages);\r\n\r\n    // Initialize Socket\r\n    useEffect(() => {\r\n        if (!user) {\r\n            console.log('No user, skipping socket connection');\r\n            return;\r\n        }\r\n\r\n        console.log('Setting up socket connection...');\r\n\r\n        try {\r\n            const newSocket = io(process.env.REACT_APP_API_URL, {\r\n                reconnection: true,\r\n                reconnectionDelay: 1000,\r\n                reconnectionDelayMax: 5000,\r\n                reconnectionAttempts: 5,\r\n                transports: ['websocket', 'polling']\r\n            });\r\n\r\n            newSocket.on('connect', () => {\r\n                console.log('âœ… Socket connected:', newSocket.id);\r\n                newSocket.emit('user_online', user.id);\r\n            });\r\n\r\n            newSocket.on('users_online', (userIds) => {\r\n                console.log('ðŸ“¡ Received users_online:', userIds);\r\n                if (Array.isArray(userIds)) {\r\n                    setOnlineUsers(userIds);\r\n                } else {\r\n                    setOnlineUsers([]);\r\n                }\r\n            });\r\n\r\n            newSocket.on('receive_message', (data) => {\r\n                console.log('ðŸ’¬ Message received:', data);\r\n                setMessages(prev => [...prev, {\r\n                    _id: data._id,\r\n                    sender: data.sender,\r\n                    text: data.text,\r\n                    timestamp: data.timestamp,\r\n                    seen: false\r\n                }]);\r\n            });\r\n\r\n            newSocket.on('user_typing', (data) => {\r\n                console.log('âœï¸ User typing');\r\n                setIsTyping(true);\r\n            });\r\n\r\n            newSocket.on('user_stopped_typing', () => {\r\n                console.log('âœï¸ User stopped typing');\r\n                setIsTyping(false);\r\n            });\r\n\r\n            // âœ… NEW: Listen for messages_seen in real-time\r\n            newSocket.on('messages_seen', (data) => {\r\n                console.log('âœ… Messages marked as seen by:', data.by);\r\n                setMessages(prev =>\r\n                    prev.map(msg =>\r\n                        msg.sender === user.id ? { ...msg, seen: true } : msg\r\n                    )\r\n                );\r\n            });\r\n\r\n            newSocket.on('disconnect', () => {\r\n                console.log('âŒ Socket disconnected');\r\n                setOnlineUsers([]);\r\n            });\r\n\r\n            newSocket.on('error', (error) => {\r\n                console.error('Socket error:', error);\r\n            });\r\n\r\n            setSocket(newSocket);\r\n\r\n            return () => {\r\n                console.log('Cleaning up socket...');\r\n                newSocket.disconnect();\r\n            };\r\n        } catch (error) {\r\n            console.error('Failed to setup socket:', error);\r\n        }\r\n    }, [user]);\r\n\r\n    // Fetch users\r\n    useEffect(() => {\r\n        const fetchUsers = async () => {\r\n            try {\r\n                console.log('Fetching users...');\r\n                const { data } = await authAPI.getUsers();\r\n                console.log('Users fetched:', data);\r\n                setUsers(data || []);\r\n            } catch (error) {\r\n                console.error('Failed to fetch users:', error);\r\n                setUsers([]);\r\n            }\r\n        };\r\n\r\n        fetchUsers();\r\n    }, []);\r\n\r\n    // Fetch messages when user selected\r\n    useEffect(() => {\r\n        if (selectedUser) {\r\n            const fetchMessages = async () => {\r\n                try {\r\n                    console.log('Fetching messages for:', selectedUser._id);\r\n                    const { data } = await messageAPI.getMessages(selectedUser._id);\r\n                    console.log('Messages fetched:', data);\r\n                    setMessages(data || []);\r\n\r\n                    // âœ… NEW: Mark messages as seen when opening chat\r\n                    if (socket && user) {\r\n                        socket.emit('mark_seen', {\r\n                            senderId: selectedUser._id,\r\n                            receiverId: user.id\r\n                        });\r\n                    }\r\n                } catch (error) {\r\n                    console.error('Failed to fetch messages:', error);\r\n                    setMessages([]);\r\n                }\r\n            };\r\n            fetchMessages();\r\n        }\r\n    }, [selectedUser, socket, user]);\r\n\r\n    // Send message\r\n    const handleSendMessage = (text) => {\r\n        if (!socket || !selectedUser || !user) {\r\n            console.error('Cannot send message - missing socket, selectedUser, or user');\r\n            return;\r\n        }\r\n\r\n        const messageData = {\r\n            sender: user.id,\r\n            receiver: selectedUser._id,\r\n            text\r\n        };\r\n\r\n        console.log('ðŸ“¤ Sending message:', messageData);\r\n        socket.emit('send_message', messageData);\r\n\r\n        // Add to local messages\r\n        setMessages(prev => [...prev, {\r\n            _id: new Date().getTime(), // Temporary ID\r\n            sender: user.id,\r\n            text,\r\n            timestamp: new Date(),\r\n            seen: false\r\n        }]);\r\n    };\r\n\r\n    const handleTyping = () => {\r\n        if (socket && selectedUser) {\r\n            socket.emit('typing', {\r\n                receiver: selectedUser._id,\r\n                senderName: user.username\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleStopTyping = () => {\r\n        if (socket && selectedUser) {\r\n            socket.emit('stop_typing', {\r\n                receiver: selectedUser._id\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        if (socket) {\r\n            socket.disconnect();\r\n        }\r\n        logout();\r\n        navigate('/login');\r\n    };\r\n\r\n    return (\r\n        <div className=\"chat-container\">\r\n            <div className=\"header\">\r\n                <h1>ðŸ’¬ Chat App</h1>\r\n                <div className=\"user-info\">\r\n                    <span>{user?.username || 'User'}</span>\r\n                    <button onClick={handleLogout}>Logout</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"chat-wrapper\">\r\n                <UserList\r\n                    users={users}\r\n                    selectedUser={selectedUser}\r\n                    onlineUsers={onlineUsers}\r\n                    onSelectUser={setSelectedUser}\r\n                />\r\n\r\n                <ChatBox\r\n                    selectedUser={selectedUser}\r\n                    messages={messages}\r\n                    currentUser={user}\r\n                    onSendMessage={handleSendMessage}\r\n                    onTyping={handleTyping}\r\n                    onStopTyping={handleStopTyping}\r\n                    isTyping={isTyping}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}