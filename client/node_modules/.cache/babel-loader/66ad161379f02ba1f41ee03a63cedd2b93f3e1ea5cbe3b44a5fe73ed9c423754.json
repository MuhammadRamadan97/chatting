{"ast":null,"code":"import React,{useRef,useEffect}from'react';import MessageInput from'./MessageInput';import'./ChatBox.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatBox=_ref=>{let{selectedUser,messages=[],currentUser,onSendMessage,onTyping,onStopTyping,isTyping}=_ref;const messagesEndRef=useRef(null);useEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages]);if(!selectedUser){return/*#__PURE__*/_jsx(\"div\",{className:\"chat-box empty\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDC48 Select a contact to start chatting\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDCAC \",selectedUser.username]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"messages\",children:[messages.length>0?messages.map((msg,idx)=>{const isSent=msg.sender===(currentUser===null||currentUser===void 0?void 0:currentUser.id);return/*#__PURE__*/_jsxs(\"div\",{className:\"message \".concat(isSent?'sent':'received'),children:[/*#__PURE__*/_jsx(\"p\",{children:msg.text}),/*#__PURE__*/_jsxs(\"span\",{className:\"timestamp\",children:[new Date(msg.timestamp).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}),isSent&&/*#__PURE__*/_jsx(\"span\",{className:\"check \".concat(msg.seen?'seen':''),children:msg.seen?'‚úì‚úì':'‚úì'})]})]},msg._id||idx);}):/*#__PURE__*/_jsx(\"p\",{className:\"no-messages\",children:\"No messages yet. Start chatting! \\uD83D\\uDC4B\"}),isTyping&&/*#__PURE__*/_jsx(\"div\",{className:\"typing\",children:\"\\u270F\\uFE0F typing...\"}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(MessageInput,{onSendMessage:onSendMessage,onTyping:onTyping,onStopTyping:onStopTyping})]});};export default ChatBox;","map":{"version":3,"names":["React","useRef","useEffect","MessageInput","jsx","_jsx","jsxs","_jsxs","ChatBox","_ref","selectedUser","messages","currentUser","onSendMessage","onTyping","onStopTyping","isTyping","messagesEndRef","_messagesEndRef$curre","current","scrollIntoView","behavior","className","children","username","length","map","msg","idx","isSent","sender","id","concat","text","Date","timestamp","toLocaleTimeString","hour","minute","seen","_id","ref"],"sources":["F:/Web-Development/chat-app/client/src/components/ChatBox.jsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\nimport MessageInput from './MessageInput';\r\nimport './ChatBox.css';\r\n\r\nconst ChatBox = ({\r\n    selectedUser,\r\n    messages = [],\r\n    currentUser,\r\n    onSendMessage,\r\n    onTyping,\r\n    onStopTyping,\r\n    isTyping\r\n}) => {\r\n    const messagesEndRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    if (!selectedUser) {\r\n        return (\r\n            <div className=\"chat-box empty\">\r\n                <p>üëà Select a contact to start chatting</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"chat-box\">\r\n            <div className=\"chat-header\">\r\n                <h3>üí¨ {selectedUser.username}</h3>\r\n            </div>\r\n\r\n            <div className=\"messages\">\r\n                {messages.length > 0 ? (\r\n                    messages.map((msg, idx) => {\r\n                        const isSent = msg.sender === currentUser?.id;\r\n\r\n                        return (\r\n                            <div key={msg._id || idx} className={`message ${isSent ? 'sent' : 'received'}`}>\r\n                                <p>{msg.text}</p>\r\n                                <span className=\"timestamp\">\r\n                                    {new Date(msg.timestamp).toLocaleTimeString([], {\r\n                                        hour: '2-digit',\r\n                                        minute: '2-digit'\r\n                                    })}\r\n\r\n                                    {isSent && (\r\n                                        <span className={`check ${msg.seen ? 'seen' : ''}`}>\r\n                                            {msg.seen ? '‚úì‚úì' : '‚úì'}\r\n                                        </span>\r\n                                    )}\r\n                                </span>\r\n                            </div>\r\n                        );\r\n                    })\r\n                ) : (\r\n                    <p className=\"no-messages\">No messages yet. Start chatting! üëã</p>\r\n                )}\r\n\r\n                {isTyping && <div className=\"typing\">‚úèÔ∏è typing...</div>}\r\n                <div ref={messagesEndRef} />\r\n            </div>\r\n\r\n            <MessageInput\r\n                onSendMessage={onSendMessage}\r\n                onTyping={onTyping}\r\n                onStopTyping={onStopTyping}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatBox;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAChD,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvB,KAAM,CAAAC,OAAO,CAAGC,IAAA,EAQV,IARW,CACbC,YAAY,CACZC,QAAQ,CAAG,EAAE,CACbC,WAAW,CACXC,aAAa,CACbC,QAAQ,CACRC,YAAY,CACZC,QACJ,CAAC,CAAAP,IAAA,CACG,KAAM,CAAAQ,cAAc,CAAGhB,MAAM,CAAC,IAAI,CAAC,CAEnCC,SAAS,CAAC,IAAM,KAAAgB,qBAAA,CACZ,CAAAA,qBAAA,CAAAD,cAAc,CAACE,OAAO,UAAAD,qBAAA,iBAAtBA,qBAAA,CAAwBE,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAClE,CAAC,CAAE,CAACV,QAAQ,CAAC,CAAC,CAEd,GAAI,CAACD,YAAY,CAAE,CACf,mBACIL,IAAA,QAAKiB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC3BlB,IAAA,MAAAkB,QAAA,CAAG,iDAAqC,CAAG,CAAC,CAC3C,CAAC,CAEd,CAEA,mBACIhB,KAAA,QAAKe,SAAS,CAAC,UAAU,CAAAC,QAAA,eACrBlB,IAAA,QAAKiB,SAAS,CAAC,aAAa,CAAAC,QAAA,cACxBhB,KAAA,OAAAgB,QAAA,EAAI,eAAG,CAACb,YAAY,CAACc,QAAQ,EAAK,CAAC,CAClC,CAAC,cAENjB,KAAA,QAAKe,SAAS,CAAC,UAAU,CAAAC,QAAA,EACpBZ,QAAQ,CAACc,MAAM,CAAG,CAAC,CAChBd,QAAQ,CAACe,GAAG,CAAC,CAACC,GAAG,CAAEC,GAAG,GAAK,CACvB,KAAM,CAAAC,MAAM,CAAGF,GAAG,CAACG,MAAM,IAAKlB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEmB,EAAE,EAE7C,mBACIxB,KAAA,QAA0Be,SAAS,YAAAU,MAAA,CAAaH,MAAM,CAAG,MAAM,CAAG,UAAU,CAAG,CAAAN,QAAA,eAC3ElB,IAAA,MAAAkB,QAAA,CAAII,GAAG,CAACM,IAAI,CAAI,CAAC,cACjB1B,KAAA,SAAMe,SAAS,CAAC,WAAW,CAAAC,QAAA,EACtB,GAAI,CAAAW,IAAI,CAACP,GAAG,CAACQ,SAAS,CAAC,CAACC,kBAAkB,CAAC,EAAE,CAAE,CAC5CC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SACZ,CAAC,CAAC,CAEDT,MAAM,eACHxB,IAAA,SAAMiB,SAAS,UAAAU,MAAA,CAAWL,GAAG,CAACY,IAAI,CAAG,MAAM,CAAG,EAAE,CAAG,CAAAhB,QAAA,CAC9CI,GAAG,CAACY,IAAI,CAAG,IAAI,CAAG,GAAG,CACpB,CACT,EACC,CAAC,GAbDZ,GAAG,CAACa,GAAG,EAAIZ,GAchB,CAAC,CAEd,CAAC,CAAC,cAEFvB,IAAA,MAAGiB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,+CAAmC,CAAG,CACpE,CAEAP,QAAQ,eAAIX,IAAA,QAAKiB,SAAS,CAAC,QAAQ,CAAAC,QAAA,CAAC,wBAAY,CAAK,CAAC,cACvDlB,IAAA,QAAKoC,GAAG,CAAExB,cAAe,CAAE,CAAC,EAC3B,CAAC,cAENZ,IAAA,CAACF,YAAY,EACTU,aAAa,CAAEA,aAAc,CAC7BC,QAAQ,CAAEA,QAAS,CACnBC,YAAY,CAAEA,YAAa,CAC9B,CAAC,EACD,CAAC,CAEd,CAAC,CAED,cAAe,CAAAP,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}