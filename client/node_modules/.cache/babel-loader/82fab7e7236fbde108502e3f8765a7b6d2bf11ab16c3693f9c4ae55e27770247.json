{"ast":null,"code":"var _jsxFileName = \"F:\\\\Web-Development\\\\chat-app\\\\client\\\\src\\\\pages\\\\Chat.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { io } from 'socket.io-client';\nimport { AuthContext } from '../context/AuthContext';\nimport { authAPI, messageAPI } from '../services/api';\nimport ChatBox from '../components/ChatBox';\nimport UserList from '../components/UserList';\nimport './Chat.css';\n// Global listener for debugging\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nwindow.socketDebug = {\n  eventsReceived: [],\n  messagesSeen: []\n};\nconst Chat = () => {\n  _s();\n  const {\n    user,\n    logout\n  } = useContext(AuthContext);\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [socket, setSocket] = useState(null);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [isTyping, setIsTyping] = useState(false);\n  const navigate = useNavigate();\n\n  // âœ… Initialize Socket Once\n  useEffect(() => {\n    console.log('ðŸ” ChatBox re-rendered');\n    console.log('Messages with checks:');\n    messages.forEach(msg => {\n      if (msg.sender === (selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.id)) {\n        console.log(`  ${msg.text}: seen=${msg.seen}`);\n      }\n    });\n  }, [messages]);\n  useEffect(() => {\n    if (!(user !== null && user !== void 0 && user.id)) {\n      console.log('âŒ No user, skipping socket');\n      return;\n    }\n    console.log('ðŸ”Œ Setting up Socket.io connection...');\n    const newSocket = io(process.env.REACT_APP_API_URL, {\n      reconnection: true,\n      reconnectionDelay: 1000,\n      reconnectionDelayMax: 5000,\n      reconnectionAttempts: 5,\n      transports: ['websocket', 'polling']\n    });\n\n    // Connection event\n    newSocket.on('connect', () => {\n      console.log('âœ… Socket connected:', newSocket.id);\n      newSocket.emit('user_online', user.id);\n    });\n\n    // Online users list\n    newSocket.on('users_online', userIds => {\n      console.log('ðŸ“¡ Users online:', userIds);\n      setOnlineUsers(Array.isArray(userIds) ? userIds : []);\n    });\n\n    // Receive messages from others\n    newSocket.on('receive_message', data => {\n      console.log('ðŸ’¬ Message received:', data);\n      setMessages(prev => [...prev, {\n        _id: data._id,\n        sender: data.sender,\n        text: data.text,\n        seen: data.seen || false,\n        timestamp: data.timestamp\n      }]);\n    });\n\n    // Typing indicators\n    newSocket.on('user_typing', () => {\n      setIsTyping(true);\n    });\n    newSocket.on('user_stopped_typing', () => {\n      setIsTyping(false);\n    });\n\n    // âœ… Messages marked as seen\n    newSocket.on('messages_seen', data => {\n      console.log('ðŸ‘€ Messages marked as seen by:', data.by);\n      setMessages(prev => prev.map(msg => msg.sender === user.id ? {\n        ...msg,\n        seen: true\n      } : msg));\n    });\n    newSocket.on('disconnect', () => {\n      console.log('âŒ Socket disconnected');\n    });\n    setSocket(newSocket);\n    return () => {\n      console.log('ðŸ§¹ Cleaning up socket');\n      newSocket.disconnect();\n    };\n  }, [user === null || user === void 0 ? void 0 : user.id]);\n\n  // âœ… Fetch all users\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const {\n          data\n        } = await authAPI.getUsers();\n        setUsers(data || []);\n      } catch (error) {\n        console.error('âŒ Failed to fetch users:', error);\n      }\n    };\n    fetchUsers();\n  }, []);\n\n  // âœ… Fetch messages only (backend marks them as seen)\n  useEffect(() => {\n    if (!selectedUser || !(user !== null && user !== void 0 && user.id)) {\n      return;\n    }\n    const loadMessages = async () => {\n      try {\n        console.log('ðŸ“¨ Fetching messages from:', selectedUser.username);\n        const {\n          data\n        } = await messageAPI.getMessages(selectedUser._id);\n\n        // âœ… Messages are already marked as seen on backend\n        console.log('âœ… Messages fetched (already marked as seen)');\n        setMessages(data || []);\n      } catch (error) {\n        console.error('âŒ Failed to load messages:', error);\n      }\n    };\n    loadMessages();\n  }, [selectedUser, user === null || user === void 0 ? void 0 : user.id]);\n\n  // âœ… Send message\n  const handleSendMessage = useCallback(text => {\n    if (!socket || !selectedUser || !(user !== null && user !== void 0 && user.id)) return;\n    socket.emit('send_message', {\n      sender: user.id,\n      receiver: selectedUser._id,\n      text\n    });\n\n    // Add to local state\n    setMessages(prev => [...prev, {\n      _id: Date.now(),\n      sender: user.id,\n      text,\n      seen: false,\n      timestamp: new Date()\n    }]);\n  }, [socket, selectedUser, user === null || user === void 0 ? void 0 : user.id]);\n\n  // âœ… Handle typing\n  const handleTyping = useCallback(() => {\n    if (socket && selectedUser) {\n      socket.emit('typing', {\n        receiver: selectedUser._id,\n        senderName: user.username\n      });\n    }\n  }, [socket, selectedUser, user === null || user === void 0 ? void 0 : user.username]);\n\n  // âœ… Stop typing\n  const handleStopTyping = useCallback(() => {\n    if (socket && selectedUser) {\n      socket.emit('stop_typing', {\n        receiver: selectedUser._id\n      });\n    }\n  }, [socket, selectedUser]);\n\n  // âœ… Logout\n  const handleLogout = () => {\n    if (socket) socket.disconnect();\n    logout();\n    navigate('/login');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDCAC Chat App\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\uD83D\\uDC64 \", user === null || user === void 0 ? void 0 : user.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(UserList, {\n        users: users,\n        selectedUser: selectedUser,\n        onlineUsers: onlineUsers,\n        onSelectUser: setSelectedUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ChatBox, {\n        selectedUser: selectedUser,\n        messages: messages,\n        currentUser: user,\n        onSendMessage: handleSendMessage,\n        onTyping: handleTyping,\n        onStopTyping: handleStopTyping,\n        isTyping: isTyping\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 190,\n    columnNumber: 9\n  }, this);\n};\n_s(Chat, \"w9zUFziXWWuRzXEzmLdwIIKgAaA=\", false, function () {\n  return [useNavigate];\n});\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useCallback","useNavigate","io","AuthContext","authAPI","messageAPI","ChatBox","UserList","jsxDEV","_jsxDEV","window","socketDebug","eventsReceived","messagesSeen","Chat","_s","user","logout","users","setUsers","selectedUser","setSelectedUser","messages","setMessages","socket","setSocket","onlineUsers","setOnlineUsers","isTyping","setIsTyping","navigate","console","log","forEach","msg","sender","id","text","seen","newSocket","process","env","REACT_APP_API_URL","reconnection","reconnectionDelay","reconnectionDelayMax","reconnectionAttempts","transports","on","emit","userIds","Array","isArray","data","prev","_id","timestamp","by","map","disconnect","fetchUsers","getUsers","error","loadMessages","username","getMessages","handleSendMessage","receiver","Date","now","handleTyping","senderName","handleStopTyping","handleLogout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSelectUser","currentUser","onSendMessage","onTyping","onStopTyping","_c","$RefreshReg$"],"sources":["F:/Web-Development/chat-app/client/src/pages/Chat.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { io } from 'socket.io-client';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { authAPI, messageAPI } from '../services/api';\r\nimport ChatBox from '../components/ChatBox';\r\nimport UserList from '../components/UserList';\r\nimport './Chat.css';\r\n// Global listener for debugging\r\nwindow.socketDebug = {\r\n    eventsReceived: [],\r\n    messagesSeen: []\r\n};\r\n\r\nconst Chat = () => {\r\n    const { user, logout } = useContext(AuthContext);\r\n    const [users, setUsers] = useState([]);\r\n    const [selectedUser, setSelectedUser] = useState(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [socket, setSocket] = useState(null);\r\n    const [onlineUsers, setOnlineUsers] = useState([]);\r\n    const [isTyping, setIsTyping] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    // âœ… Initialize Socket Once\r\n    useEffect(() => {\r\n        console.log('ðŸ” ChatBox re-rendered');\r\n        console.log('Messages with checks:');\r\n        messages.forEach(msg => {\r\n            if (msg.sender === selectedUser?.id) {\r\n                console.log(`  ${msg.text}: seen=${msg.seen}`);\r\n            }\r\n        });\r\n    }, [messages]);\r\n    useEffect(() => {\r\n        if (!user?.id) {\r\n            console.log('âŒ No user, skipping socket');\r\n            return;\r\n        }\r\n\r\n        console.log('ðŸ”Œ Setting up Socket.io connection...');\r\n\r\n        const newSocket = io(process.env.REACT_APP_API_URL, {\r\n            reconnection: true,\r\n            reconnectionDelay: 1000,\r\n            reconnectionDelayMax: 5000,\r\n            reconnectionAttempts: 5,\r\n            transports: ['websocket', 'polling']\r\n        });\r\n\r\n        // Connection event\r\n        newSocket.on('connect', () => {\r\n            console.log('âœ… Socket connected:', newSocket.id);\r\n            newSocket.emit('user_online', user.id);\r\n        });\r\n\r\n        // Online users list\r\n        newSocket.on('users_online', (userIds) => {\r\n            console.log('ðŸ“¡ Users online:', userIds);\r\n            setOnlineUsers(Array.isArray(userIds) ? userIds : []);\r\n        });\r\n\r\n        // Receive messages from others\r\n        newSocket.on('receive_message', (data) => {\r\n            console.log('ðŸ’¬ Message received:', data);\r\n            setMessages(prev => [...prev, {\r\n                _id: data._id,\r\n                sender: data.sender,\r\n                text: data.text,\r\n                seen: data.seen || false,\r\n                timestamp: data.timestamp\r\n            }]);\r\n        });\r\n\r\n        // Typing indicators\r\n        newSocket.on('user_typing', () => {\r\n            setIsTyping(true);\r\n        });\r\n\r\n        newSocket.on('user_stopped_typing', () => {\r\n            setIsTyping(false);\r\n        });\r\n\r\n        // âœ… Messages marked as seen\r\n        newSocket.on('messages_seen', (data) => {\r\n            console.log('ðŸ‘€ Messages marked as seen by:', data.by);\r\n\r\n            setMessages(prev =>\r\n                prev.map(msg =>\r\n                    msg.sender === user.id ? { ...msg, seen: true } : msg\r\n                )\r\n            );\r\n        })\r\n\r\n        newSocket.on('disconnect', () => {\r\n            console.log('âŒ Socket disconnected');\r\n        });\r\n\r\n        setSocket(newSocket);\r\n\r\n        return () => {\r\n            console.log('ðŸ§¹ Cleaning up socket');\r\n            newSocket.disconnect();\r\n        };\r\n    }, [user?.id]);\r\n\r\n    // âœ… Fetch all users\r\n    useEffect(() => {\r\n        const fetchUsers = async () => {\r\n            try {\r\n                const { data } = await authAPI.getUsers();\r\n                setUsers(data || []);\r\n            } catch (error) {\r\n                console.error('âŒ Failed to fetch users:', error);\r\n            }\r\n        };\r\n\r\n        fetchUsers();\r\n    }, []);\r\n\r\n    // âœ… Fetch messages only (backend marks them as seen)\r\n    useEffect(() => {\r\n        if (!selectedUser || !user?.id) {\r\n            return;\r\n        }\r\n\r\n        const loadMessages = async () => {\r\n            try {\r\n                console.log('ðŸ“¨ Fetching messages from:', selectedUser.username);\r\n                const { data } = await messageAPI.getMessages(selectedUser._id);\r\n\r\n                // âœ… Messages are already marked as seen on backend\r\n                console.log('âœ… Messages fetched (already marked as seen)');\r\n                setMessages(data || []);\r\n            } catch (error) {\r\n                console.error('âŒ Failed to load messages:', error);\r\n            }\r\n        };\r\n\r\n        loadMessages();\r\n    }, [selectedUser, user?.id]);\r\n\r\n    // âœ… Send message\r\n    const handleSendMessage = useCallback((text) => {\r\n        if (!socket || !selectedUser || !user?.id) return;\r\n\r\n        socket.emit('send_message', {\r\n            sender: user.id,\r\n            receiver: selectedUser._id,\r\n            text\r\n        });\r\n\r\n        // Add to local state\r\n        setMessages(prev => [...prev, {\r\n            _id: Date.now(),\r\n            sender: user.id,\r\n            text,\r\n            seen: false,\r\n            timestamp: new Date()\r\n        }]);\r\n    }, [socket, selectedUser, user?.id]);\r\n\r\n    // âœ… Handle typing\r\n    const handleTyping = useCallback(() => {\r\n        if (socket && selectedUser) {\r\n            socket.emit('typing', {\r\n                receiver: selectedUser._id,\r\n                senderName: user.username\r\n            });\r\n        }\r\n    }, [socket, selectedUser, user?.username]);\r\n\r\n    // âœ… Stop typing\r\n    const handleStopTyping = useCallback(() => {\r\n        if (socket && selectedUser) {\r\n            socket.emit('stop_typing', {\r\n                receiver: selectedUser._id\r\n            });\r\n        }\r\n    }, [socket, selectedUser]);\r\n\r\n    // âœ… Logout\r\n    const handleLogout = () => {\r\n        if (socket) socket.disconnect();\r\n        logout();\r\n        navigate('/login');\r\n    };\r\n\r\n    return (\r\n        <div className=\"chat-container\">\r\n            <div className=\"header\">\r\n                <h1>ðŸ’¬ Chat App</h1>\r\n                <div className=\"user-info\">\r\n                    <span>ðŸ‘¤ {user?.username}</span>\r\n                    <button onClick={handleLogout}>Logout</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"chat-wrapper\">\r\n                <UserList\r\n                    users={users}\r\n                    selectedUser={selectedUser}\r\n                    onlineUsers={onlineUsers}\r\n                    onSelectUser={setSelectedUser}\r\n                />\r\n\r\n                <ChatBox\r\n                    selectedUser={selectedUser}\r\n                    messages={messages}\r\n                    currentUser={user}\r\n                    onSendMessage={handleSendMessage}\r\n                    onTyping={handleTyping}\r\n                    onStopTyping={handleStopTyping}\r\n                    isTyping={isTyping}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}